{"mappings":"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","sources":["src/js/get-refs.js","src/js/fetchPhoto.js","src/index.js","src/js/articles.js"],"sourcesContent":["export default function getRefs() {\n  return {\n    searchForm: document.querySelector('#search-form'),\n    // photoListEl: document.querySelector('[type=\"text\"]'),\n    submitBtn: document.querySelector('[type=\"submit\"]'),\n    moreBtn: document.querySelector('.load-more'),\n    sentinel: document.querySelector('#sentinel'),\n    articlesContainer: document.querySelector('.js-articles-container'),\n\n    galleryEl: document.querySelector('.gallery'),\n  };\n}\n","// import Notiflix from 'notiflix';\n// import axios from 'axios';\nimport getRefs from './get-refs';\nexport { FetchPhoto, onFetchError };\n\nconst refs = getRefs();\n\n// https://pixabay.com/api/?key=30279426-ce0edf6a31bb607e668c5bb01&q=yellow+flowers&image_type=photo\nconst MAIN_URL = 'https://pixabay.com/api/';\nconst API_KEY = '?key=30279426-ce0edf6a31bb607e668c5bb01&';\nconst URL = MAIN_URL + API_KEY;\n\nclass FetchPhoto {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n    this.per_page = 40;\n    this.totalHits = 0;\n  }\n\n  async fetchArticles() {\n    const searchParams = new URLSearchParams({\n      q: this.searchQuery,\n      per_page: this.per_page,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: this.page,\n    });\n\n    \n    try {\n      const url = `${URL}${searchParams}`;\n      const response = await axios.get(url);\n      \n      // console.log(response);\n      \n      let counterPhoto = this.page * this.per_page;\n      this.totalHits = response.data.totalHits;\n\n      if (this.page === 1 && this.totalHits !== 0) {\n        Notiflix.Notify.success(\n          `Hooray! We found ${this.totalHits} images.`\n        );\n      }\n\n      // if (\n      //   counterPhoto > this.totalHits &&\n      //   this.totalHits !== 0 &&\n      //   this.page !== 1\n      // ) {\n      //   onFetchInfo(this.totalHits);\n      // }\n\n      return response;\n    } catch (error) {\n      onFetchInfo(this.totalHits);\n      // console.error('error in async:', error);\n    }\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n\nfunction onFetchError(error) {\n  refs.articlesContainer.innerHTML = '';\n  Notiflix.Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.'\n  );\n}\n\nfunction onFetchInfo(totalPhotos) {\n  // console.log('onFetchInfo', totalPhotos);\n  Notiflix.Notify.info(\n    `We're sorry, but you've reached the end of search results ${totalPhotos} images`\n  );\n  refs.moreBtn.classList.remove('is-hidden');\n}\n","// import axios from 'axios';\n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n\n// import Notiflix from 'notiflix';\nimport { FetchPhoto, onFetchError } from './js/fetchPhoto';\nimport getRefs from './js/get-refs';\nimport articlesTpl from './js/articles';\n\nconst refs = getRefs();\nconst fetchPhoto = new FetchPhoto();\n\nrefs.submitBtn.classList.add('button');\nrefs.moreBtn.classList.add('button', 'is-hidden');\n\n// Пoвернення до початку сторінки\nrefs.moreBtn.addEventListener('click', topFunction);\n\nfunction topFunction() {\n  document.body.scrollTop = 0;\n  document.documentElement.scrollTop = 0;\n}\n\nrefs.searchForm.addEventListener('submit', onSearch);\n\nfunction onSearch(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  fetchPhoto.query = form.elements.searchQuery.value.trim();\n\n  if (fetchPhoto.query === '') {\n    return Notiflix.Notify.info(`Enter search data, please`);\n  }\n\n  fetchPhoto.resetPage();\n  form.reset();\n  try {\n    fetchPhoto.fetchArticles().then(hits => {\n      if (hits.data.total === 0) {\n        return onFetchError();\n      }\n      appendArticlesMarkup(hits.data.hits);\n      fetchPhoto.incrementPage();\n    });\n  } catch {\n   return onFetch400();\n  }\n  clearArticlesContainer();\n}\n\nfunction appendArticlesMarkup(hits) {\n  refs.galleryEl.insertAdjacentHTML('beforeend', articlesTpl(hits));\n}\n\nfunction clearArticlesContainer() {\n  refs.articlesContainer.innerHTML = '';\n}\n\nconst onEntry = entries => {\n  try {\n    entries.forEach(entry => {\n      if (entry.isIntersecting && fetchPhoto.query !== '') {\n        fetchPhoto.fetchArticles().then(hits => {\n        \n          appendArticlesMarkup(hits.data.hits);\n          fetchPhoto.incrementPage();\n        });\n      }\n    });\n  } catch {\n    onFetch400();\n  }\n};\n\nfunction onFetch400() {\n  Notiflix.Notify.info(\n    `We're sorry, but you've reached the end of search results images`\n  );\n}\n\n// Бесконечній скролл\nconst observer = new IntersectionObserver(onEntry, {\n  rootMargin: '300px',\n});\nobserver.observe(refs.sentinel);\n\n// SimpleLightbox\nrefs.galleryEl.addEventListener('click', onClickGalleryItem);\n\nfunction onClickGalleryItem(event) {\n  if (!event.target.classList.contains('gallery__image')) {\n    return;\n  }\n  event.preventDefault();\n  //   console.log(event.target);\n  showModalImgSimpleLightbox();\n}\n\nfunction showModalImgSimpleLightbox() {\n  let lightbox = new SimpleLightbox('.gallery a', {\n    nav: true,\n    caption: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n  });\n\n  lightbox.refresh();\n}\n\n// Плавный скролл\n// const { height: cardHeight } = document\n//   .querySelector(\".gallery\")\n//   .firstElementChild.getBoundingClientRect();\n\n// window.scrollBy({\n//   top: cardHeight * 2,\n//   behavior: \"smooth\",\n// });\n","export default function articlesTpl(photo) {\n  return photo\n    .map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n      return `\n      <div class='photo-card'>\n      <a href='${largeImageURL}'><img class=\"gallery__image\" src='${webformatURL}' alt=${tags}' loading='lazy'/></a>\n      <div class='info'>\n        <p class='info-item'>\n          <b>Likes: ${likes}</b>\n        </p>\n        <p class='info-item'>\n          <b>Views: ${views}</b>\n        </p>\n        <p class='info-item'>\n          <b>Comments: ${comments}</b>\n        </p>\n        <p class='info-item'>\n          <b>Downloads: ${downloads}</b>\n        </p>\n      </div>\n    </div>`;\n    })\n    .join('');\n}\n\n\n// return photo\n// .map(({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) => {\n//   return `\n//   <div class='photo-card'>\n//   <img src='${webformatURL}' alt='${tags}' loading='lazy' />\n//   <div class='info'>\n//     <p class='info-item'>\n//       <b>Likes: ${likes}</b>\n//     </p>\n//     <p class='info-item'>\n//       <b>Views: ${views}</b>\n//     </p>\n//     <p class='info-item'>\n//       <b>Comments: ${comments}</b>\n//     </p>\n//     <p class='info-item'>\n//       <b>Downloads: ${downloads}</b>\n//     </p>\n//   </div>\n// </div>`;\n// })\n// .join('');\n// }"],"names":["$f973f0a89548de5e$export$2e2bcd8739ae039","searchForm","document","querySelector","submitBtn","moreBtn","sentinel","articlesContainer","galleryEl","$6530577793780e12$var$refs","$1f0dc3b9307be026$var$refs","$1f0dc3b9307be026$var$fetchPhoto","async","searchParams","URLSearchParams","q","this","searchQuery","per_page","image_type","orientation","safesearch","page","url","response","axios","get","totalHits","data","Notiflix","Notify","success","error","totalPhotos","info","classList","remove","incrementPage","resetPage","query","newQuery","constructor","$1f0dc3b9307be026$var$appendArticlesMarkup","hits","insertAdjacentHTML","map","largeImageURL","webformatURL","tags","likes","views","comments","downloads","join","add","addEventListener","body","scrollTop","documentElement","event","preventDefault","form","currentTarget","elements","value","trim","reset","fetchArticles","then","total","innerHTML","failure","$1f0dc3b9307be026$var$onFetch400","IntersectionObserver","entries","forEach","entry","isIntersecting","rootMargin","observe","target","contains","SimpleLightbox","nav","caption","captionsData","captionPosition","captionDelay","refresh"],"version":3,"file":"index.d3107b02.js.map"}