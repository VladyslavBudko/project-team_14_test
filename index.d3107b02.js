function e(){return{searchForm:document.querySelector("#search-form"),submitBtn:document.querySelector('[type="submit"]'),moreBtn:document.querySelector(".load-more"),sentinel:document.querySelector("#sentinel"),articlesContainer:document.querySelector(".js-articles-container"),galleryEl:document.querySelector(".gallery")}}const t=e();const r=e(),a=new class{async fetchArticles(){const e=new URLSearchParams({q:this.searchQuery,per_page:this.per_page,image_type:"photo",orientation:"horizontal",safesearch:!0,page:this.page});try{const t=`https://pixabay.com/api/?key=30279426-ce0edf6a31bb607e668c5bb01&${e}`,r=await axios.get(t);this.page,this.per_page;return this.totalHits=r.data.totalHits,1===this.page&&0!==this.totalHits&&Notiflix.Notify.success(`Hooray! We found ${this.totalHits} images.`),r}catch(e){r=this.totalHits,Notiflix.Notify.info(`We're sorry, but you've reached the end of search results ${r} images`),t.moreBtn.classList.remove("is-hidden")}var r}incrementPage(){this.page+=1}resetPage(){this.page=1}get query(){return this.searchQuery}set query(e){this.searchQuery=e}constructor(){this.searchQuery="",this.page=1,this.per_page=40,this.totalHits=0}};function n(e){r.galleryEl.insertAdjacentHTML("beforeend",e.map((({largeImageURL:e,webformatURL:t,tags:r,likes:a,views:n,comments:i,downloads:s})=>`\n      <div class='photo-card'>\n      <a href='${e}'><img class="gallery__image" src='${t}' alt=${r}' loading='lazy'/></a>\n      <div class='info'>\n        <p class='info-item'>\n          <b>Likes: ${a}</b>\n        </p>\n        <p class='info-item'>\n          <b>Views: ${n}</b>\n        </p>\n        <p class='info-item'>\n          <b>Comments: ${i}</b>\n        </p>\n        <p class='info-item'>\n          <b>Downloads: ${s}</b>\n        </p>\n      </div>\n    </div>`)).join(""))}r.submitBtn.classList.add("button"),r.moreBtn.classList.add("button","is-hidden"),r.moreBtn.addEventListener("click",(function(){document.body.scrollTop=0,document.documentElement.scrollTop=0})),r.searchForm.addEventListener("submit",(function(e){e.preventDefault();const s=e.currentTarget;if(a.query=s.elements.searchQuery.value.trim(),""===a.query)return Notiflix.Notify.info("Enter search data, please");a.resetPage(),s.reset();try{a.fetchArticles().then((e=>{if(0===e.data.total)return t.articlesContainer.innerHTML="",void Notiflix.Notify.failure("Sorry, there are no images matching your search query. Please try again.");n(e.data.hits),a.incrementPage()}))}catch{return i()}r.articlesContainer.innerHTML=""}));function i(){Notiflix.Notify.info("We're sorry, but you've reached the end of search results images")}new IntersectionObserver((e=>{try{e.forEach((e=>{e.isIntersecting&&""!==a.query&&a.fetchArticles().then((e=>{n(e.data.hits),a.incrementPage()}))}))}catch{i()}}),{rootMargin:"300px"}).observe(r.sentinel),r.galleryEl.addEventListener("click",(function(e){if(!e.target.classList.contains("gallery__image"))return;e.preventDefault(),new SimpleLightbox(".gallery a",{nav:!0,caption:!0,captionsData:"alt",captionPosition:"bottom",captionDelay:250}).refresh()}));
//# sourceMappingURL=index.d3107b02.js.map
